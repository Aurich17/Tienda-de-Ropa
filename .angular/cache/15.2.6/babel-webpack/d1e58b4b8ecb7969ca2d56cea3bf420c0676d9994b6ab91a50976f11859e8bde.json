{"ast":null,"code":"import { FormControl, FormGroup } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../../almacen/domain/almacen.repository\";\nimport * as i2 from \"../../../domain/kardex.repository\";\nimport * as i3 from \"../../../../producto/domain/producto.repository\";\nimport * as i4 from \"../../../../services/storage.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/form-field\";\nimport * as i7 from \"@angular/material/input\";\nimport * as i8 from \"@angular/material/button\";\nimport * as i9 from \"@angular/material/icon\";\nimport * as i10 from \"@angular/forms\";\nimport * as i11 from \"@angular/material/table\";\nimport * as i12 from \"../../../../shared/components/table/table.component\";\nimport * as i13 from \"../../../../shared/directives/error-control.directive\";\nimport * as i14 from \"@angular/material/select\";\nimport * as i15 from \"@angular/material/core\";\nfunction ListadoKardexComponent_mat_option_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 22);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const tienda_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", tienda_r3.codigo);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(tienda_r3.nombre);\n  }\n}\nfunction ListadoKardexComponent_th_43_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"th\", 23);\n  }\n}\nfunction ListadoKardexComponent_td_44_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 24)(1, \"button\", 25)(2, \"mat-icon\");\n    i0.ɵɵtext(3, \"delete\");\n    i0.ɵɵelementEnd()()();\n  }\n}\n//@ts-ignore\nexport let ListadoKardexComponent = /*#__PURE__*/(() => {\n  class ListadoKardexComponent {\n    iniciaFormulario() {\n      this.group = new FormGroup({\n        almacen: new FormControl(null, null),\n        codigo: new FormControl(null, null),\n        periodoInicio: new FormControl(null, null),\n        periodoFin: new FormControl(null, null),\n        descripcion: new FormControl(null, null)\n      });\n    }\n    constructor(almacenService, kardexService, productoService, storage) {\n      this.almacenService = almacenService;\n      this.kardexService = kardexService;\n      this.productoService = productoService;\n      this.storage = storage;\n      this.listaAlmacenes = [];\n      this.metadataTable = [{\n        field: 'periodo',\n        title: 'Periodo'\n      }, {\n        field: 'desAlmacen',\n        title: 'Almacen Descripcion'\n      }, {\n        field: 'codigoProducto',\n        title: 'Cod. Producto'\n      }, {\n        field: 'desProducto',\n        title: 'Desc. Producto'\n      }, {\n        field: 'fechaDocumento',\n        title: 'Fecha'\n      }, {\n        field: 'tipoDocumento',\n        title: 'T.Documento'\n      }, {\n        field: 'nroDocumento',\n        title: 'Nro.Documento'\n      }, {\n        field: 'cantidad',\n        title: 'Cantidad'\n      }];\n    }\n    ngOnInit() {\n      this.iniciaFormulario();\n      this.listar();\n    }\n    listar() {\n      const requestAlmacen = {}; //  this.group.value;\n      requestAlmacen.Descripcion = '%';\n      requestAlmacen.Estado = 'A';\n      this.almacenService.listar(requestAlmacen).subscribe(response => {\n        const tiendas = response.datos.result.map(tienda => {\n          return {\n            nombre: tienda.descripcion,\n            codigo: tienda.codigoAlmacen\n          };\n        });\n        this.listaAlmacenes = [...this.listaAlmacenes, ...tiendas];\n      });\n    }\n    listarKardex(codigo) {\n      const values = this.group.value;\n      const requestKardex = {};\n      if (codigo != 0) {\n        requestKardex.CodigoProducto = codigo;\n      }\n      requestKardex.CodigoAlmacen = values['almacen'];\n      requestKardex.CodigoKardex = 0;\n      requestKardex.PeriodoInicio = values['periodoInicio'];\n      requestKardex.PeriodoFin = values['periodoFin'];\n      requestKardex.FechaInicio = \"2023-02-01T00:00:00\";\n      requestKardex.FechaFin = \"2023-04-16T23:59:00\";\n      requestKardex.CodigoTipoDocumento = \"\";\n      requestKardex.TipoTransaccion = \"\";\n      requestKardex.CodigoEmpresa = \"00000001\";\n      if (requestKardex.CodigoAlmacen === null) {\n        requestKardex.CodigoAlmacen = 0;\n      }\n      if (requestKardex.CodigoProducto === null) {\n        requestKardex.CodigoProducto = 0;\n      }\n      if (requestKardex.PeriodoInicio === null) {\n        requestKardex.PeriodoInicio = 202304;\n      }\n      if (requestKardex.PeriodoFin === null) {\n        requestKardex.PeriodoFin = 202304;\n      }\n      this.kardexService.listarKardex(requestKardex).subscribe(response => {\n        this.kardexResponse = response;\n        this.dataTable = this.kardexResponse.datos.result;\n      });\n    }\n    listarProducto() {\n      if (this.group.valid) {\n        const fd = new FormData();\n        const values = this.group.value;\n        const requestProducto = {}; //  this.group.value;\n        requestProducto.CodigoEmpresa = this.storage.get(\"codcompania\").toString();\n        requestProducto.CodigoProducto = '0';\n        requestProducto.Descripcion = values['descripcion'];\n        requestProducto.Color = '%';\n        requestProducto.Talla = '%';\n        requestProducto.Tipo_Prenda = 0;\n        requestProducto.Genero = '%';\n        requestProducto.Estado = 'A';\n        this.productoService.listar(requestProducto).subscribe(response => {\n          console.log(response.datos.result[0].codigoProducto);\n          this.productoResponse = response;\n          this.listarKardex(response.datos.result[0].codigoProducto);\n        });\n      }\n    }\n  }\n  ListadoKardexComponent.ɵfac = function ListadoKardexComponent_Factory(t) {\n    return new (t || ListadoKardexComponent)(i0.ɵɵdirectiveInject(i1.AlmacenRepository), i0.ɵɵdirectiveInject(i2.ListadoKardexRepository), i0.ɵɵdirectiveInject(i3.ProductoRepository), i0.ɵɵdirectiveInject(i4.StorageService));\n  };\n  ListadoKardexComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ListadoKardexComponent,\n    selectors: [[\"app-listado-kardex\"]],\n    decls: 45,\n    vars: 4,\n    consts: [[2, \"text-align\", \"center\", \"margin-top\", \"70px\"], [1, \"formKardex\", 3, \"formGroup\"], [\"appearance\", \"fill\", \"appearance\", \"outline\", 1, \"list\"], [\"name\", \"tienda\", \"formControlName\", \"almacen\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"appearance\", \"outline\", \"color\", \"primary\", 2, \"width\", \"10%\"], [\"matInput\", \"\", \"type\", \"number\", \"formControlName\", \"periodoInicio\"], [\"matInput\", \"\", \"type\", \"number\", \"formControlName\", \"periodoFin\"], [\"appearance\", \"outline\", 1, \"list\", 2, \"margin-left\", \"10px\", \"width\", \"15%\"], [\"name\", \"almacen\"], [\"value\", \"FA\"], [\"value\", \"BO\"], [\"matInput\", \"\", \"type\", \"number\", \"formControlName\", \"codigo\"], [\"appearance\", \"outline\", \"color\", \"primary\", 2, \"width\", \"30%\"], [\"matInput\", \"\", \"type\", \"text\", \"formControlName\", \"descripcion\", 3, \"input\"], [1, \"botones\"], [\"mat-raised-button\", \"\"], [\"mat-raised-button\", \"\", 3, \"click\"], [3, \"dataTable\", \"metadataTable\"], [\"matColumnDef\", \"actions\"], [\"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", \"style\", \"background-color: var(--color-filas);\", 4, \"matCellDef\"], [3, \"value\"], [\"mat-header-cell\", \"\"], [\"mat-cell\", \"\", 2, \"background-color\", \"var(--color-filas)\"], [\"mat-button\", \"\", 1, \"eliminarFila\"]],\n    template: function ListadoKardexComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"body\")(1, \"h1\", 0);\n        i0.ɵɵtext(2, \"KARDEX\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"form\", 1)(4, \"mat-form-field\", 2)(5, \"mat-label\");\n        i0.ɵɵtext(6, \"Tienda\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"mat-select\", 3);\n        i0.ɵɵtemplate(8, ListadoKardexComponent_mat_option_8_Template, 2, 2, \"mat-option\", 4);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(9, \"mat-form-field\", 5)(10, \"mat-label\");\n        i0.ɵɵtext(11, \"Periodo Inicio\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(12, \"input\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"mat-form-field\", 5)(14, \"mat-label\");\n        i0.ɵɵtext(15, \"Perido Fin\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(16, \"input\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"mat-form-field\", 8)(18, \"mat-label\");\n        i0.ɵɵtext(19, \"Transaccion\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"mat-select\", 9)(21, \"mat-option\", 10);\n        i0.ɵɵtext(22, \"Transaccion1\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"mat-option\", 11);\n        i0.ɵɵtext(24, \"Transaccion2\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(25, \"mat-form-field\", 5)(26, \"mat-label\");\n        i0.ɵɵtext(27, \"Codigo\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(28, \"input\", 12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"mat-form-field\", 13)(30, \"mat-label\");\n        i0.ɵɵtext(31, \"Descripcion\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"input\", 14);\n        i0.ɵɵlistener(\"input\", function ListadoKardexComponent_Template_input_input_32_listener() {\n          return ctx.listarProducto();\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(33, \"div\", 15)(34, \"button\", 16);\n        i0.ɵɵtext(35, \"Ver Transaccion\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(36, \"button\", 17);\n        i0.ɵɵlistener(\"click\", function ListadoKardexComponent_Template_button_click_36_listener() {\n          return ctx.listarKardex(0);\n        });\n        i0.ɵɵtext(37, \"Buscar\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(38, \"button\", 16);\n        i0.ɵɵtext(39, \"Salir\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(40, \"div\")(41, \"app-table\", 18);\n        i0.ɵɵelementContainerStart(42, 19);\n        i0.ɵɵtemplate(43, ListadoKardexComponent_th_43_Template, 1, 0, \"th\", 20);\n        i0.ɵɵtemplate(44, ListadoKardexComponent_td_44_Template, 4, 0, \"td\", 21);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"formGroup\", ctx.group);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngForOf\", ctx.listaAlmacenes);\n        i0.ɵɵadvance(33);\n        i0.ɵɵproperty(\"dataTable\", ctx.dataTable)(\"metadataTable\", ctx.metadataTable);\n      }\n    },\n    dependencies: [i5.NgForOf, i6.MatFormField, i6.MatLabel, i7.MatInput, i8.MatButton, i9.MatIcon, i10.ɵNgNoValidate, i10.DefaultValueAccessor, i10.NumberValueAccessor, i10.NgControlStatus, i10.NgControlStatusGroup, i10.FormGroupDirective, i10.FormControlName, i11.MatHeaderCellDef, i11.MatColumnDef, i11.MatCellDef, i11.MatHeaderCell, i11.MatCell, i12.TableComponent, i13.ErrorControlDirective, i14.MatSelect, i15.MatOption],\n    styles: [\"body[_ngcontent-%COMP%]{overflow:hidden;height:100%;width:100%;position:absolute;top:0;left:0}.formKardex[_ngcontent-%COMP%]{margin-top:40px;display:flex;justify-content:space-between;align-items:center;overflow:hidden}.botones[_ngcontent-%COMP%]{margin-top:130px;margin-bottom:30px;display:flex;width:40%;justify-content:end;justify-content:space-around;margin-left:60%;height:54px}.botones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--color-boton);width:150px;font-size:16px;border-radius:7px;color:var(--color-texto)}.botones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--color-hover);color:var(--color-texto)}\"]\n  });\n  return ListadoKardexComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}