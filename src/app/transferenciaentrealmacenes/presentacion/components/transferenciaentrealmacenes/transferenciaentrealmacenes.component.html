
<mat-toolbar color ="primary" style="height: 33px;" fxLayout fxLayoutAlign="space-between left" >

    <h3 class="title">Transferencia Entre Almacenes</h3>
    
</mat-toolbar>

<div fxLayout="row" fxLayout.xs="column" fxLayoutGap="0px" fxLayoutAlign="center" style="margin-top: 1px;">

    <div fxFlex="100" style=" padding: 0px;">
        <mat-card>
            <mat-card-content >
                <form [formGroup] = "group" > 
                    <div fxLayout="row" fxLayoutGap="2px" fxLayoutAlign="center">
                        
                        <div fxFlex="100" fxLayout="column" fxLayoutAlign="center " style="padding: 24px;">

                            <mat-card>
                                <mat-card-content >
                                    <div fxLayout="row" fxLayoutGap="20px">
                                        <mat-form-field appearance="fill"  class="example-full-width-alterno">
                                            <mat-label>Almacen Origen</mat-label>
                                            <mat-select  formControlName = "almacenorigen">
                                                <mat-option *ngFor="let row of Almacen" [value]="row.codigoAlmacen">
                                                    {{row.descripcion}}
                                                </mat-option>
                                            </mat-select>
                                            <mat-error>Seleccione un Almacen por favor</mat-error>
                                        </mat-form-field>

                                        <mat-form-field appearance="fill"  class="example-full-width-alterno">
                                            <mat-label>Almacen Destino</mat-label>
                                            <mat-select  formControlName = "almacendestino">
                                                <mat-option *ngFor="let row of Almacen" [value]="row.codigoAlmacen">
                                                {{row.descripcion}}
                                                </mat-option>
                                            </mat-select>
                                            <mat-error>Seleccione un Almacen por favor</mat-error>
                                        </mat-form-field>

                                    </div>

                                    <div fxLayout="row" fxLayoutGap="20px">
                                       
                                        <mat-form-field appearance="outline"  class="example-full-width">
                                        <mat-label>Observacion</mat-label>
                                        <input #searchElement  type="text"   matInput  formControlName = "observacion">
                                        </mat-form-field>

                                    </div>
                                </mat-card-content>
                            </mat-card>     
                            
                            <mat-card>
                                <mat-card-content >
                                    <mat-card-title>Detalle Producto</mat-card-title>
                                    <div fxLayout="row" fxLayoutGap="20px">
                                            <mat-form-field appearance="outline"  class="example-full-width-alterno">
                                            <mat-label>Producto</mat-label>
                                            <input #searchElement   type="text"    matInput  formControlName = "codigoproducto"
                                            (keydown)="handleKeyDown($event,'Producto')"   >
                                            <mat-error>Ingrese un codigo producto por favor</mat-error>
                                            <mat-icon matSuffix >close</mat-icon>
                                            </mat-form-field>
                
                                            <mat-form-field appearance="outline"  class="example-full-width">
                                            <mat-label>descripcion</mat-label>
                                            <input #searchElement  readonly type="text"   matInput  formControlName = "descripcion">
                                            </mat-form-field>
                
                                             <button mat-raised-button  color="primary" style="height: 48px;"
                                               matTooltip="Buscar Producto" type="button">
                                               <mat-icon>search</mat-icon>
                                             </button>

                                    </div>

                                    <div fxLayout="row" fxLayoutGap="20px">

                                           <mat-form-field appearance="fill"  class="example-full-width-alterno">
                                                <mat-label>Lote</mat-label>
                                                <mat-select  formControlName = "lote"  (selectionChange)="ListarStockxLote($event.value)">
                                                    <mat-option *ngFor="let row of Lote" [value]="row.CodigoLote">
                                                        {{row.Descripcion}}
                                                    </mat-option>
                                                </mat-select>
                                                <mat-error>Seleccione un Lote por favor</mat-error>
                                            </mat-form-field>
                                        
                                            <mat-form-field appearance="outline"  class="example-full-width-alterno">
                                            <mat-label>Cantidad</mat-label>
                                            <input #searchElement    type="number"   matInput required formControlName = "cantidad">
                                            <mat-error>ingrese la cantidad</mat-error>
                                            </mat-form-field>
                                            

                                            <mat-form-field appearance="outline"  class="example-full-width-alterno">
                                                <mat-label>Stock x Lote</mat-label>
                                                <input #searchElement  readonly  type="text"   matInput  formControlName = "stockactuallote">
                                            </mat-form-field>

                                            <mat-form-field appearance="outline"  class="example-full-width-alterno">
                                            <mat-label>Stock Total</mat-label>
                                            <input #searchElement  readonly  type="text"   matInput  formControlName = "stockactual">
                                            </mat-form-field>

                                            <div  style="padding-top: 4px;">
                                                <button mat-raised-button  color="primary"  style="height: 70%;"
                                                  matTooltip="Agregar Producto"
                                                  (click) = "AgregarItem($event)" 
                                                  >
                                                  <mat-icon>add_box</mat-icon>
                                                </button>
                                            </div>

                                    </div>
                                
                                </mat-card-content>
                            </mat-card>  

                            <div fxLayout="row" fxLayoutGap="20px">


                            </div>

                            

                        </div>
            
                    </div>
                </form>



                    <div fxLayoutAlign="center center" fxLayoutGap="20px"  color="primary" >
                 

                        <button mat-raised-button color="primary"
                            matTooltip="Nuevo registro"
                            type="button">Nuevo
                        <mat-icon>description</mat-icon>
                        </button>
                        <button mat-raised-button color="primary" 
                            matTooltip="Grabar registro"
                            type="button">Grabar
                            <mat-icon>save</mat-icon>
                        </button>

                        <button mat-raised-button color="primary"
                            matTooltip="Cerrar de la pantalla actual"
                            type="button">Salir
                            <mat-icon>exit_to_app</mat-icon>
                        </button>


                    </div>
           
            </mat-card-content>

        </mat-card>

          
            <div fxLayout="column" fxLayout.xs="column" fxLayoutGap="20px">
        
                <div fxFlex="50"  style="background-color:  rgb(219, 217, 217); padding: 1px;">
                
                    <app-table [dataTable]="dataTable" [metadataTable]="metadataTable">
    
                        <ng-container matColumnDef="actions">
                        <th mat-header-cell *matHeaderCellDef ></th>
                        <td  mat-cell *matCellDef="let row" >
                      
                          <button mat-button *ngIf="!row.IsEditing" (click)="editItem(row)"><mat-icon>edit</mat-icon></button>
                          <button mat-button *ngIf="row.IsEditing" (click)="saveItem(row)"><mat-icon>save</mat-icon></button>
                          <button mat-button *ngIf="row.IsEditing" (click)="cancelEditItem(row)"><mat-icon>close</mat-icon></button>
                          <button mat-button  type="button" (click) = "EliminarItem(row)"><mat-icon>delete</mat-icon>
                          </button>
                          
                        </td>
                        </ng-container>
                    
                    </app-table>



                </div>
            </div>
    
    </div>

</div>