<div class="">

    <mat-toolbar color ="primary" style="height: 33px;" fxLayout  >
        <h3 class="title">Ingreso Producto</h3>
    </mat-toolbar>

    <div fxLayout="row" fxLayout.xs="column" fxLayoutGap="0px" fxLayoutAlign="center" style="margin-top: 0px;">

          <div fxFlex="100" style=" padding: 0px;">
               <mat-card appearance="outlined" >
               
                    <mat-card-content >
                      <form [formGroup] = "group" > 
                                
                          <div fxLayout = "row" fxLayoutGap="20px">
                             <mat-card class="example-card">
                              <mat-card-header>
                                <mat-card-title>Datos de Almacen</mat-card-title>
                              </mat-card-header>
                               <mat-card-content>
                                  <div fxLayout="row" fxLayoutGap="20px">
                                    
                                      <mat-form-field appearance="fill"  class="example-full-width-alterno">
                                        <mat-label>Lote</mat-label>
                                        <mat-select  #tienda formControlName = "lote">
                                          <mat-option *ngFor="let row of Lote" [value]="row.codigoLote">
                                            {{row.descripcion}}
                                          </mat-option>
                                        </mat-select>
                                        <mat-error>Seleccione un Lote por favor</mat-error>
                                      </mat-form-field>
                                            

                                      <mat-form-field appearance="fill"  class="example-full-width-alterno">
                                        <mat-label>Almacen</mat-label>
                                        <mat-select  formControlName = "almacen">
                                        <mat-option *ngFor="let row of Almacen" [value]="row.codigoAlmacen">
                                        {{row.descripcion}}
                                        </mat-option>
                                        </mat-select>
                                        <mat-error>Seleccione un Almacen por favor</mat-error>
                                      </mat-form-field>

                                  </div>


                                  <div fxLayout="row" fxLayoutGap="20px" >

                                    <mat-form-field appearance="outline"  class="example-full-width">
                                      <mat-label>Observacion</mat-label>
                                      <input #searchElement  type="text"   matInput  formControlName = "observacion">
                                    </mat-form-field>

                                  </div>

                                </mat-card-content>
                              </mat-card>

                              <mat-card class="example-card">
                                <mat-card-header>
                                  <mat-card-title>Datos del Productos</mat-card-title>
                                </mat-card-header>
                                <mat-card-content>
                                  <div fxLayout="row" fxLayoutGap="20px" >
                                          
                                        <mat-form-field appearance="outline"  class="example-full-width-alterno3">
                                            <mat-label>Producto</mat-label>
                                            <input #searchElement   type="text"   matInput  formControlName = "codigoproducto"
                                            (keydown)="handleKeyDown($event,'Producto')"
                                            >
                                            <mat-error>Ingrese un codigo producto por favor</mat-error>
                                            <mat-icon matSuffix (click) = "limpiartexto('Empleado')">close</mat-icon>
                                        </mat-form-field>

                                        <mat-form-field appearance="outline"  class="example-full-width">
                                          <mat-label>descripcion</mat-label>
                                          <input #searchElement  readonly
                                          type="text"   matInput  formControlName = "descripcion">
                                        </mat-form-field>

                                        <button mat-raised-button  color="primary" style="height: 48px;"
                                          matTooltip="Buscar Producto"
                                          type="button">
                                          <mat-icon>search</mat-icon>
                                        </button>

                                  </div>

                                  <div fxLayout="row" fxLayoutGap="20px">

                                        <mat-form-field appearance="outline"  class="example-full-width-alterno">
                                            <mat-label>Cantidad</mat-label>
                                            <input #searchElement    type="number"   matInput required formControlName = "cantidad">
                                            <mat-error>ingrese la cantidad</mat-error>  
                                        </mat-form-field>
                                        <mat-form-field appearance="outline"  class="example-full-width-alterno">
                                            <mat-label>Costo Unitario</mat-label>
                                            <input #searchElement    type="number"   matInput required formControlName = "costounitario">  
                                        </mat-form-field>


                                        <mat-form-field appearance="outline"  class="example-full-width-alterno">
                                            <mat-label>Stock Actual</mat-label>
                                            <input #searchElement  readonly  type="text"   matInput  formControlName = "stockactual">
                                        </mat-form-field>

                                  </div>

                                  <div fxLayout="row" fxLayoutGap="20px">
                                        <mat-form-field appearance="outline"  class="example-full-width">
                                          <mat-label>Observacion</mat-label>
                                          <input #searchElement    type="text"   matInput  formControlName = "ObservacionDetalle">
                                          
                                        </mat-form-field>
                                        <div  style="padding-top: 4px;">
                                              <button mat-raised-button  color="primary"  style="height: 70%;"
                                                matTooltip="Agregar Producto"
                                                (click) = "AgregarItem($event)" 
                                                >
                                                <mat-icon>add_box</mat-icon>
                                              </button>
                                        </div>
                                  </div>

                                  <div fxLayout="row" fxLayoutGap="20px" fxLayoutAlign="end start">
                                    
                                        <input type="file"  (change)="onFileSelected($event)">
                            
                                        <button mat-raised-button color="primary"
                                          matTooltip="Importar"
                                          (click) = "importFile()"
                                          type="button">Importar
                                          <mat-icon>description</mat-icon>
                                        </button>

                                  </div>
                                </mat-card-content>
                              </mat-card>
                           </div>
                      </form>
                      <div fxLayoutAlign="center center" fxLayoutGap="20px"  color="primary" >
                       
                          <button mat-raised-button color="primary"
                              matTooltip="Nuevo registro"
                              (click) = "Nuevo()"
                              type="button">Nuevo
                          <mat-icon>description</mat-icon>
                          </button>
                          <button mat-raised-button color="primary" #guardar [disabled]="group.invalid"
                              matTooltip="Grabar registro"
                              (click) = "grabarIngreso()"
                              type="button">Grabar
                              <mat-icon>save</mat-icon>
                          </button>

                          <button mat-raised-button color="primary"
                              matTooltip="Cerrar de la pantalla actual"
                            
                              type="button">Salir
                              <mat-icon>exit_to_app</mat-icon>
                          </button>


                      </div>
                
                    </mat-card-content>

                </mat-card>

                
                <div fxLayout="column" fxLayout.xs="column" fxLayoutGap="20px">
              
                  <div fxFlex="50"  style="background-color:  rgb(219, 217, 217); padding: 1px;">
                      <app-table [dataTable]="dataTable" [metadataTable]="metadataTable">
          
                          <ng-container matColumnDef="actions">
                          <th mat-header-cell *matHeaderCellDef ></th>
                          <td  mat-cell *matCellDef="let row" >
                        
                            <button mat-button *ngIf="!row.IsEditing" (click)="editItem(row)"><mat-icon>edit</mat-icon></button>
                            <button mat-button *ngIf="row.IsEditing" (click)="saveItem(row)"><mat-icon>save</mat-icon></button>
                            <button mat-button *ngIf="row.IsEditing" (click)="cancelEditItem(row)"><mat-icon>close</mat-icon></button>
                            <button mat-button  type="button" (click) = "EliminarItem(row)"><mat-icon>delete</mat-icon>
                            </button>
                            
                          </td>
                          </ng-container>
                      
                  </app-table>
                  
                  </div>
                </div>
          
          

    </div>


</div>

